(this.webpackJsonpaudios=this.webpackJsonpaudios||[]).push([[0],{181:function(e,t,a){},182:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(64),i=a.n(r),s=(a(73),a(9)),o=a(4),l=a(2),d=a(65),u=a.n(d),j=a(0),p=function(){var e=Object(n.useContext)(T),t=(e.store,e.dispatch);return Object(j.jsx)("header",{className:"row centered ".concat(u.a.header),children:["search","likelist"].map((function(e){return Object(j.jsx)("button",{onClick:function(){return t({type:"INIT_TAB",payload:e})},children:e},e)}))})},b=a(5),O=a.n(b),h=function(e){var t=e.track,a=t.title_short,c=t.link,r=t.duration,i=t.rank,s=t.preview,o=(t.md5_image,t.artist,t.album),l=Object(n.useContext)(T),d=l.store,u=l.dispatch,p=l.audioRef,b=new Date(1e3*r),h=+i.toString().slice(0,2),f=function(e){return toString(e).length>1?e:"0"+e},m=Object(j.jsx)("div",{className:O.a.action,children:Object(j.jsx)("div",{className:"row centered ".concat(O.a.action),children:[1,2,3].map((function(e,t){return Object(j.jsx)("div",{className:O.a.line,style:{animation:"playing ".concat(t+1,"s linear infinite")}})}))})});return Object(j.jsxs)("div",{className:"column ".concat(O.a.card),children:[Object(j.jsx)("div",{className:O.a.img,style:{background:"url(".concat(o.cover_medium,")")},children:d.audio===s&&m}),Object(j.jsx)("button",{className:"row centered ".concat(O.a.playBtn),onClick:function(){d.audio!==s&&u({type:"INIT_AUDIO",payload:s}),u({type:"AUDIO_STATUS",payload:!d.playing})},children:d.playing||d.audio!==s?"Play":"Stop"}),Object(j.jsxs)("div",{className:"column ".concat(O.a.cardContent),children:[d.audio===s&&Object(j.jsx)("input",{type:"range",min:0,max:30,step:1,value:d.time,onChange:function(e){return p.current.currentTime=e.target.value}}),Object(j.jsxs)("div",{className:"row centered ".concat(O.a.informerRow),children:[Object(j.jsx)("h3",{children:a}),d.likeList.find((function(e){return e.id===t.id}))?Object(j.jsx)("button",{onClick:function(){return u({type:"REMOVE_FROM_LIKELIST",payload:t})},children:"Dislike"}):Object(j.jsx)("button",{onClick:function(){return u({type:"ADD_TO_LIKELIST",payload:t})},children:"Like"})]}),Object(j.jsxs)("div",{className:"row centered ".concat(O.a.informerRow),children:[Object(j.jsx)("span",{children:"Duration:"}),Object(j.jsxs)("span",{children:[f(b.getMinutes()),"m"," ",f(b.getSeconds()),"s"]})]}),Object(j.jsxs)("div",{className:"row centered ".concat(O.a.informerRow),children:["Rank:",Object(j.jsx)("div",{className:"row centered ".concat(O.a.rank),style:{width:h+"px",background:"rgb(".concat(2*(100-h),",").concat(2*(h-50),",70)")},children:i})]}),Object(j.jsx)("a",{href:c,children:"View"})]})]})},f=a(41),m=a.n(f),x=a(68),_=a(42),v=a.n(_),y=function(){var e,t=Object(n.useContext)(T),a=t.store,c=t.dispatch,r=t.audioRef,i=Object(n.useCallback)((function(){r.current.paused?(r.current.play(),c({type:"AUDIO_STATUS",payload:!1})):(r.current.pause(),c({type:"AUDIO_STATUS",payload:!0}))}),[]),s=Object(n.useCallback)((function(){var e=a.authorData.tracks,t=e.indexOf(e.find((function(e){return e.preview===a.audio})));c({type:"INIT_AUDIO",payload:t+1>e.length-1?e[0].preview:e[t+1].preview})}),[a.authorData,a.audio]),o=Object(n.useCallback)((function(){var e=a.authorData.tracks,t=e.indexOf(e.find((function(e){return e.preview===a.audio})));c({type:"INIT_AUDIO",payload:t-1<0?e[e.length-1].preview:e[t-1].preview})}),[a.authorData,a.audio]);return Object(j.jsx)("aside",{className:"column centered",children:(null===(e=a.authorData)||void 0===e?void 0:e.singer)?function(){var e=a.authorData.singer,t=e.name,n=e.link,c=e.picture_medium,r=a.authorData.tracks,l={labels:r.map((function(e){return e.title_short})),datasets:[{label:"Rank",data:r.map((function(e){return e.rank}))}]};return Object(j.jsxs)("div",{className:"column centered",children:[Object(j.jsx)("img",{src:c,alt:t,className:v.a.avatar}),Object(j.jsx)("h3",{children:t}),Object(j.jsx)("a",{href:n,children:"View"}),Object(j.jsxs)("div",{className:"column centered ".concat(v.a.chartWrapper),children:[Object(j.jsx)(x.a,{data:l,options:{indexAxis:"x",responsive:!1,plugins:{legend:!1},scales:{y:{display:!1},x:{display:!1}}}}),Object(j.jsx)("h3",{children:"Songs raiting"})]}),Object(j.jsxs)("div",{className:"row centered",children:[Object(j.jsx)("button",{onClick:function(){return o()},children:"<<"}),Object(j.jsx)("button",{onClick:function(){return i()},children:"Play"}),Object(j.jsx)("button",{onClick:function(){return s()},children:">>"})]})]})}():Object(j.jsx)("h1",{children:"Loading..."})})},g=function(){var e=Object(n.useContext)(T),t=(e.store,e.dispatch),a=Object(n.useState)(""),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(),l=Object(s.a)(o,2),d=l[0],u=l[1];return Object(j.jsxs)("div",{className:"row centered section",children:[d&&Object(j.jsx)(y,{}),Object(j.jsxs)("div",{className:"column centered ".concat(m.a.main),children:[Object(j.jsxs)("div",{className:"row centered",children:[Object(j.jsx)("input",{type:"text",placeholder:"Artist...",value:r,onChange:function(e){return i(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){fetch("https://deezerdevs-deezer.p.rapidapi.com/search?q=".concat(r),{method:"GET",headers:{"x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com","x-rapidapi-key":"2ecc6a18f1msh149a8c93469a116p1ff3e3jsn92ea038f0326"}}).then((function(e){return e.json()})).then((function(e){if(e.error)return alert("API Refused request due to limits per second. Please try again :(");u(e.data),console.log(e.data),e.data&&t({type:"INIT_CURR_AUTHOR",payload:{singer:e.data[0].artist,tracks:e.data}}),console.log(e)})),i("")},children:"Search"})]}),Object(j.jsx)("div",{className:"row ".concat(m.a.wrapper),children:null===d||void 0===d?void 0:d.map((function(e){return Object(j.jsx)(h,{track:e})}))})]})]})},k=a(43),I=a.n(k),w=function(){var e=Object(n.useContext)(T),t=e.store;e.dispatch;return Object(j.jsxs)("div",{className:"column centered ".concat(I.a.likelist),children:[Object(j.jsx)("h3",{children:"LikeList"}),Object(j.jsx)("div",{className:"row centered ".concat(I.a.wrapper),children:t.likeList.length?t.likeList.map((function(e){return Object(j.jsx)(h,{track:e})})):Object(j.jsx)("h4",{children:"There is no any song yet"})})]})},N=(a(181),function(e,t){switch(t.type){case"INIT_TAB":return Object(l.a)(Object(l.a)({},e),{},{tab:t.payload});case"INIT_AUDIO":return Object(l.a)(Object(l.a)({},e),{},{audio:t.payload});case"AUDIO_STATUS":return Object(l.a)(Object(l.a)({},e),{},{playing:t.payload});case"INIT_CURR_TIME":return Object(l.a)(Object(l.a)({},e),{},{time:t.payload});case"INIT_CURR_AUTHOR":return Object(l.a)(Object(l.a)({},e),{},{authorData:t.payload});case"ADD_TO_LIKELIST":return Object(l.a)(Object(l.a)({},e),{},{likeList:[].concat(Object(o.a)(e.likeList),[t.payload])});case"REMOVE_FROM_LIKELIST":return Object(l.a)(Object(l.a)({},e),{},{likeList:e.likeList.filter((function(e){return e.id!==t.payload.id}))});default:return e}}),T=Object(n.createContext)();var C=function(){var e=Object(n.useReducer)(N,{tab:"info",playing:!0,likeList:localStorage.getItem("likelist")?JSON.parse(localStorage.getItem("likelist")):[]}),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useRef)();return Object(n.useEffect)((function(){var e=r.current;e.load(),e.src=a.audio,e.play()}),[a.audio]),Object(n.useEffect)((function(){a.playing?r.current.pause():r.current.play()}),[a.playing]),Object(n.useEffect)((function(){localStorage.setItem("likelist",JSON.stringify(a.likeList))}),[a.likeList]),Object(n.useEffect)((function(){var e=setInterval((function(){c({type:"INIT_CURR_TIME",payload:r.current.currentTime})}),500);return function(){clearInterval(e)}}),[]),Object(j.jsx)("div",{className:"column centered app",children:Object(j.jsxs)(T.Provider,{value:{dispatch:c,store:a,audioRef:r},children:[Object(j.jsx)("audio",{src:a.audio,ref:r,crossOrigin:"anonymous"}),Object(j.jsx)(p,{}),"search"===a.tab?Object(j.jsx)(g,{}):Object(j.jsx)(w,{})]})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,183)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root")),R()},41:function(e,t,a){e.exports={main:"search_main__1o7Wv",wrapper:"search_wrapper__2MfQx"}},42:function(e,t,a){e.exports={avatar:"aside_avatar__1YrGl",chartWrapper:"aside_chartWrapper__3_Nzx"}},43:function(e,t,a){e.exports={likelist:"likelist_likelist__27TQ4",wrapper:"likelist_wrapper__12DyV"}},5:function(e,t,a){e.exports={card:"card_card__1mFXq",img:"card_img__1Eipo",action:"card_action__1dEW1",line:"card_line__DViV8",cardContent:"card_cardContent__2nBpb",playBtn:"card_playBtn__3zA5a",informerRow:"card_informerRow__nFKCY",rank:"card_rank__gRWQe"}},65:function(e,t,a){},73:function(e,t,a){}},[[182,1,2]]]);
//# sourceMappingURL=main.d3526e6e.chunk.js.map